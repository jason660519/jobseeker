{% extends "base.html" %}

{% block title %}文檔 - jobseeker{% endblock %}

{% block extra_css %}
<style>
    .docs-hero {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 4rem 0;
        margin-bottom: 3rem;
    }
    
    .docs-nav {
        background: #f8f9fa;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        position: sticky;
        top: 100px;
    }
    
    .docs-content {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 2rem;
    }
    
    .code-block {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 1rem;
        margin: 1rem 0;
        font-family: 'Courier New', monospace;
        overflow-x: auto;
    }
    
    .api-endpoint {
        background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        border-radius: 8px;
        padding: 1rem;
        margin: 1rem 0;
    }
    
    .method-badge {
        display: inline-block;
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: bold;
        margin-right: 0.5rem;
    }
    
    .method-get { background: #28a745; color: white; }
    .method-post { background: #007bff; color: white; }
    .method-put { background: #ffc107; color: black; }
    .method-delete { background: #dc3545; color: white; }
</style>
{% endblock %}

{% block content %}
<!-- 文檔標題區 -->
<div class="docs-hero text-center">
    <div class="container">
        <h1 class="display-4 fw-bold mb-4">
            <i class="fas fa-book me-3"></i>
            jobseeker 文檔
        </h1>
        <p class="lead mb-0">
            完整的使用指南、API 文檔和開發者資源
        </p>
    </div>
</div>

<div class="container">
    <div class="row">
        <!-- 側邊導航 -->
        <div class="col-lg-3">
            <div class="docs-nav">
                <h5 class="fw-bold mb-3">目錄</h5>
                <ul class="list-unstyled">
                    <li><a href="#getting-started" class="text-decoration-none">快速開始</a></li>
                    <li><a href="#installation" class="text-decoration-none">安裝指南</a></li>
                    <li><a href="#basic-usage" class="text-decoration-none">基本使用</a></li>
                    <li><a href="#api-reference" class="text-decoration-none">API 參考</a></li>
                    <li><a href="#supported-sites" class="text-decoration-none">支援網站</a></li>
                    <li><a href="#examples" class="text-decoration-none">使用範例</a></li>
                    <li><a href="#troubleshooting" class="text-decoration-none">故障排除</a></li>
                </ul>
            </div>
        </div>
        
        <!-- 主要內容 -->
        <div class="col-lg-9">
            <!-- 快速開始 -->
            <div class="docs-content" id="getting-started">
                <h2><i class="fas fa-rocket me-2"></i>快速開始</h2>
                <p>jobseeker 是一個強大的職位搜尋工具，支援從多個求職網站抓取職位資訊。</p>
                
                <h4>主要特色</h4>
                <ul>
                    <li>支援 9+ 個主要求職網站</li>
                    <li>智能路由系統，自動選擇最佳搜尋策略</li>
                    <li>多格式輸出（CSV、JSON）</li>
                    <li>反偵測機制，提高成功率</li>
                    <li>異步處理，提升效能</li>
                </ul>
            </div>
            
            <!-- 安裝指南 -->
            <div class="docs-content" id="installation">
                <h2><i class="fas fa-download me-2"></i>安裝指南</h2>
                
                <h4>使用 pip 安裝</h4>
                <div class="code-block">
pip install python-jobseeker
                </div>
                
                <h4>從源碼安裝</h4>
                <div class="code-block">
git clone https://github.com/jason660519/jobseeker.git
cd jobseeker
pip install -e .
                </div>
                
                <h4>安裝 Playwright（必需）</h4>
                <div class="code-block">
pip install playwright
playwright install
                </div>
            </div>
            
            <!-- 基本使用 -->
            <div class="docs-content" id="basic-usage">
                <h2><i class="fas fa-code me-2"></i>基本使用</h2>
                
                <h4>Python 程式碼範例</h4>
                <div class="code-block">
from jobseeker import scrape_jobs
from jobseeker.model import Site, Country

# 基本搜尋
jobs = scrape_jobs(
    site=Site.LINKEDIN,
    search_term="python developer",
    location="台北",
    results_wanted=50,
    country=Country.TAIWAN
)

# 輸出結果
print(f"找到 {len(jobs)} 個職位")
jobs.to_csv("jobs.csv", index=False)
                </div>
                
                <h4>智能路由使用</h4>
                <div class="code-block">
from jobseeker.route_manager import smart_scrape_jobs

# 使用智能路由自動選擇最佳網站
result = smart_scrape_jobs(
    query="軟體工程師 台北",
    max_results=100
)

print(f"總共找到 {result.total_jobs} 個職位")
print(f"成功的網站: {[site.value for site in result.successful_agents]}")
                </div>
            </div>
            
            <!-- API 參考 -->
            <div class="docs-content" id="api-reference">
                <h2><i class="fas fa-cogs me-2"></i>Web API 參考</h2>
                
                <div class="api-endpoint">
                    <span class="method-badge method-post">POST</span>
                    <strong>/search</strong>
                    <p class="mb-2">執行職位搜尋</p>
                    
                    <h6>請求參數：</h6>
                    <ul>
                        <li><code>query</code> - 搜尋關鍵字</li>
                        <li><code>location</code> - 地點（可選）</li>
                        <li><code>max_results</code> - 最大結果數（預設 50）</li>
                    </ul>
                    
                    <h6>回應格式：</h6>
                    <div class="code-block">
{
  "success": true,
  "search_id": "uuid",
  "total_jobs": 25,
  "execution_time": 12.5,
  "jobs": [...]
}
                    </div>
                </div>
                
                <div class="api-endpoint">
                    <span class="method-badge method-get">GET</span>
                    <strong>/download/&lt;search_id&gt;/&lt;format&gt;</strong>
                    <p class="mb-2">下載搜尋結果</p>
                    
                    <h6>支援格式：</h6>
                    <ul>
                        <li><code>csv</code> - CSV 格式</li>
                        <li><code>json</code> - JSON 格式</li>
                    </ul>
                </div>
            </div>
            
            <!-- 支援網站 -->
            <div class="docs-content" id="supported-sites">
                <h2><i class="fas fa-globe me-2"></i>支援網站</h2>
                
                <div class="row">
                    <div class="col-md-6">
                        <h5>國際網站</h5>
                        <ul>
                            <li><i class="fab fa-linkedin text-primary"></i> LinkedIn</li>
                            <li><i class="fas fa-briefcase text-info"></i> Indeed</li>
                            <li><i class="fas fa-building text-success"></i> Glassdoor</li>
                            <li><i class="fas fa-search text-warning"></i> ZipRecruiter</li>
                            <li><i class="fas fa-globe text-secondary"></i> Google Jobs</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h5>區域網站</h5>
                        <ul>
                            <li><i class="fas fa-map-marker-alt text-danger"></i> Bayt (中東)</li>
                            <li><i class="fas fa-map-marker-alt text-primary"></i> Naukri (印度)</li>
                            <li><i class="fas fa-map-marker-alt text-success"></i> Seek (澳洲)</li>
                            <li><i class="fas fa-map-marker-alt text-warning"></i> BDJobs (孟加拉)</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- 使用範例 -->
            <div class="docs-content" id="examples">
                <h2><i class="fas fa-lightbulb me-2"></i>使用範例</h2>
                
                <h4>批量搜尋多個關鍵字</h4>
                <div class="code-block">
keywords = ["python", "javascript", "react", "django"]
all_jobs = []

for keyword in keywords:
    jobs = scrape_jobs(
        site=Site.INDEED,
        search_term=keyword,
        location="台北",
        results_wanted=20
    )
    all_jobs.append(jobs)

# 合併所有結果
import pandas as pd
combined_jobs = pd.concat(all_jobs, ignore_index=True)
                </div>
                
                <h4>過濾和處理結果</h4>
                <div class="code-block">
# 過濾高薪職位
high_salary_jobs = jobs[
    (jobs['min_amount'] >= 80000) | 
    (jobs['max_amount'] >= 120000)
]

# 按公司分組
jobs_by_company = jobs.groupby('company').size().sort_values(ascending=False)
print("職位數最多的公司：")
print(jobs_by_company.head(10))
                </div>
            </div>
            
            <!-- 故障排除 -->
            <div class="docs-content" id="troubleshooting">
                <h2><i class="fas fa-tools me-2"></i>故障排除</h2>
                
                <h4>常見問題</h4>
                
                <div class="alert alert-warning">
                    <h6><i class="fas fa-exclamation-triangle me-2"></i>Playwright 安裝問題</h6>
                    <p>如果遇到 Playwright 相關錯誤，請確保已正確安裝瀏覽器：</p>
                    <code>playwright install chromium</code>
                </div>
                
                <div class="alert alert-info">
                    <h6><i class="fas fa-info-circle me-2"></i>搜尋結果為空</h6>
                    <p>可能原因：</p>
                    <ul>
                        <li>網站反爬蟲機制觸發</li>
                        <li>搜尋關鍵字過於具體</li>
                        <li>地區限制</li>
                    </ul>
                    <p>建議使用智能路由功能，會自動嘗試多個網站。</p>
                </div>
                
                <div class="alert alert-success">
                    <h6><i class="fas fa-lightbulb me-2"></i>提升成功率的技巧</h6>
                    <ul>
                        <li>使用較寬泛的搜尋關鍵字</li>
                        <li>設定合理的延遲時間</li>
                        <li>避免短時間內大量請求</li>
                        <li>使用代理伺服器（如需要）</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}